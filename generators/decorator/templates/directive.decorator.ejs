(function () {
  'use strict';

  angular
    .module('<%= moduleName %>')
    .decorator('<%= recipeName %>Directive', <%= recipeName %>DirectiveDecorator);

  /* @ngInject */
  function <%= recipeName %>DirectiveDecorator(
    $delegate
  ) {
    var ddo = $delegate[0];
    var originalLinkFn = ddo.link;

    ddo.compile = compile;
    delete ddo.link;

    return $delegate;

    ////////////

    function compile() {
      return link;

      ////////////

      function link(scope, el, attrs, controller) {
        originalLinkFn && originalLinkFn.apply(this, arguments);
      }
    }
  }
}());

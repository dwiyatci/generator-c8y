(function () {
  'use strict';

  angular
    .module('<%= moduleName %>')
    .decorator('<%= recipeName %>Directive', directiveDecorator);

  /* @ngInject */
  function directiveDecorator(
    $delegate,
    $compile,
    $parse
  ) {
    const ddo = $delegate[0];
    const { link:originalLinkFn } = ddo;

    ddo.compile = compile;
    _.unset(ddo, 'link');

    return $delegate;

    ////////////

    function compile() {
      return link;

      ////////////

      function link(scope, el, attrs, controller) {
        originalLinkFn && originalLinkFn.apply(this, arguments);
      }
    }
  }
}());

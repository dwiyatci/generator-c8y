import { <%= widgetConstantsName %> } from './constants.js';
import { <%= widgetDataServiceName %> } from './data.service.js';
import { <%= widgetComponentName %> } from './widget.component.js';
import { <%= widgetConfigComponentName %> } from './widget-config.component.js';

export default angular
  .module('<%= moduleName %>', [])
  .constant('<%= widgetConstantsName %>', <%= widgetConstantsName %>)
  .factory('<%= widgetDataServiceName %>', <%= widgetDataServiceName %>)
  .component('<%= widgetComponentName %>', <%= widgetComponentName %>)
  .component('<%= widgetConfigComponentName %>', <%= widgetConfigComponentName %>)
  .config(configure);

function configure(
  c8yComponentsProvider: any,
  gettext: angular.gettext.gettextFunction
) {
  'ngInject';

  c8yComponentsProvider.add({
    name: '<%= camelCasedWidgetName %>',
    nameDisplay: gettext('<%= capitalizedWidgetName %>'),
    description: gettext('<%- widgetDesc %>'),
    widgetComponent: '<%= widgetComponentName %>',
    configComponent: '<%= widgetConfigComponentName %>',
    options: {
      noDeviceTarget: false,
      noNewWidgets: false,
      deviceTargetNotRequired: false,
      groupsSelectable: false
    }
  });
}
